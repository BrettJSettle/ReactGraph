(this.webpackJsonpgraphing=this.webpackJsonpgraphing||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),c=a(18),i=a(79),s=a(14),u=a(35),d=a(71),m=a(9),h=a(31),f=a(12),y=a(69),p=a(15),v=a(22),g=a(17),E=a(16),w=a(28),b=a(32),C=a(52),S=a(44),j=function(){return([1e4]+-1e3).replace(/[018]/g,(function(e){var t=15&crypto.getRandomValues(new Uint8Array(1))[0];return(e^(t>>=e/4)).toString(16)}))},O=function(e,t){var a=!0;if(Object.keys(t).forEach((function(e){window.cy.style().parse(e,t[e])||(a=!1)})),a){var n=window.cy.style(),r=function(e){var t=window.cy.style().length-1;return Object.values(window.cy.style()).forEach((function(a){a.selector&&a.selector.inputText===e&&(t=a.index)})),t}(e);n[r].properties=[],n[r].mappedProperties=[];var l=n.length;return n.length=r+1,n.css(t),n.length=l,n._private.newStyle=!0,n}},k=["eh-handle","eh-preview","eh-ghost-node","eh-ghost-edge","eh-ghost","eh-presumptive-target","eh-preview-active"],I=[".eh-handle",".eh-hover",".eh-source",".eh-target",".eh-preview, .eh-ghost-edge",".eh-ghost-edge.eh-preview-active"],A=["node","edge"],x=/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*\s*/g,N=function(e){var t=window.cy.elements(e||"");return t=t.filter((function(e){return 0===(t=e.classes(),a=k,t.filter((function(e){return a.includes(e)}))).length;var t,a})),window.cy.collection(t)},D=function(e,t){var a=JSON.stringify(e,null,2),n=document.createElement("a"),r=new Blob([a],{type:"text/javascript"});n.href=URL.createObjectURL(r),n.download=t+".json",document.body.appendChild(n),n.click()},B=[".eh-source",".eh-target",".eh-hover"],F=function(){var e=function(e){var t=new Set;return e.forEach((function(e,a){e.classes().forEach((function(e){return t.add(e)}))})),Array.from(t)}(N());return window.cy.style().json().forEach((function(t){var a=t.selector;if(!B.includes(a)){var n=a.match(x);n&&n.length>0&&(n=n.map((function(e){return e.substring(1)})).filter((function(e){return!k.includes(e)})),e=[].concat(Object(S.a)(e),Object(S.a)(n)))}})),e},L=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={invalid:!1,feedback:""},e.fileSelected=function(t){var a=t.target.files;if(1!==a.length)return!1;var n=a[0];console.log(n.name);var r={};try{r=JSON.parse(n.content)}catch(o){return void e.setState({invalid:!0,feedback:"Unable to parse ".concat(n.name," as JSON.")})}var l="elements";Array.isArray(r)?"selector"in r[0]&&(l="style"):"selector"in r&&(l="style"),e.setState({invalid:!1,feedback:"Loaded ".concat(n.name," as ").concat(l)})},e.handleLoad=function(e){e.preventDefault();var t=e.target.form;window.f=t,console.log(t)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.invalid,a=e.feedback;return r.a.createElement(m.a,{onSubmit:this.handleLoad},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.File,{id:"formcheck-api-custom",custom:!0},r.a.createElement(m.a.File.Input,{isValid:a&&!t,isInvalid:t,onChange:this.fileSelected}),r.a.createElement(m.a.File.Label,null,"Import Graph/Style JSON"),a&&r.a.createElement(m.a.Control.Feedback,{type:t?"invalid":"valid"},a))),r.a.createElement(f.a,{className:"float-right",disabled:t||!a,type:"submit"},"Load"))}}]),a}(r.a.Component),M=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={type:"elements"},e.setType=function(t){e.setState({type:t})},e.setStyle=function(t){e.setState({style:t})},e.save=function(t){t.preventDefault();var a=e.state.type,n={};"elements"===a?n=window.cy.elements().json():"style"===a&&(n=window.cy.style().json()),D(n,a)},e.handleTypeChange=function(t){var a=t.target.value;e.setState({type:a})},e}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{onSubmit:this.save},r.a.createElement(m.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(m.a.Label,null,"Export data"),r.a.createElement(m.a.Control,{as:"select",name:"type",onChange:this.handleTypeChange},r.a.createElement("option",{value:"elements"},"Elements"),r.a.createElement("option",{value:"style"},"Style"))),r.a.createElement(f.a,{className:"float-right",type:"submit"},"Export"))}}]),a}(r.a.Component),J=function(e){var t=e.handleClose;return r.a.createElement(w.a,{show:!0,onHide:t,as:C.a},r.a.createElement(w.a.Header,{as:"h4",closeButton:!0},r.a.createElement(w.a.Title,null,"Import/Export Graphs and Styles")),r.a.createElement(w.a.Body,null,r.a.createElement(b.a,{variant:"flush"},r.a.createElement(b.a.Item,null,r.a.createElement(L,null)),r.a.createElement(b.a.Item,null,r.a.createElement(M,null)))))},R=[{name:"Grid",defaults:{name:"grid"}},{name:"Circle",defaults:{name:"circle"}},{name:"Concentric",defaults:{name:"concentric"}},{name:"Random",defaults:{name:"random"}},{name:"Preset",defaults:{name:"preset"}},{name:"Breadthfirst",defaults:{name:"breadthfirst"}},{name:"Cose",defaults:{name:"cose"}}],T={},V=[{selector:"node",style:{}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle"}},{selector:"node[name]",style:{content:"data(name)","text-valign":"center"}},{selector:".eh-handle",style:{"background-color":"red",width:12,height:12,shape:"ellipse","overlay-opacity":0,"border-width":12,"border-opacity":0}},{selector:".eh-hover",style:{"background-color":"red"}},{selector:".eh-source",style:{"border-width":2,"border-color":"red"}},{selector:".eh-target",style:{"border-width":2,"border-color":"red"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"red","line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{selector:".eh-ghost-edge.eh-preview-active",style:{opacity:0}}],G=function(){var e=function(e){var t=e.defaults;e.name in T&&t.update(T[e.name]),window.cy.layout(t).run()};return r.a.createElement(i.a,{title:"Layout",variant:"toolbar-button",as:y.a},R.map((function(t,a){return r.a.createElement(s.a.Item,{key:a,value:t,onClick:e.bind(null,t)},t.name)})),r.a.createElement(s.a.Divider,null),r.a.createElement(s.a.Item,{onClick:function(){alert("Not supported yet")}},"Edit layouts"))},P=function(e){e.preventDefault();var t=document.getElementById("query");window.cy.startBatch(),window.cy.elements().deselect(),window.cy.$(t.value).select(),window.cy.fit(),window.cy.endBatch()},K=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=function(){l(!a)};return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(J,{handleClose:o}),r.a.createElement(d.a,{bg:"dark",variant:"dark"},r.a.createElement(d.a.Brand,null,"Graphing"),r.a.createElement(u.a,{className:"mr-auto",as:y.a},r.a.createElement(f.a,{variant:"toolbar-button",onClick:o},"File"),r.a.createElement(f.a,{variant:"toolbar-button",onClick:function(){return window.cy.fit()}},"Fit"),r.a.createElement(G,null)),r.a.createElement(m.a,{inline:!0,onSubmit:P},r.a.createElement(h.a,{type:"text",id:"query",placeholder:"Search",className:"mr-sm-2"}))))},z=a(67),H=a.n(z),U=a(80),_=a.n(U),q=a(81),Z=a.n(q),$=a(82),W=a(88),Q=a(30),X=a(63),Y=a(90),ee=a(84),te=a(86),ae=a.n(te),ne=(a(111),a(113),["tree","view","code","text","form"]),re=r.a.forwardRef((function(e,t){var a=[].concat(ne,Object(S.a)(e.extraModes||[]));return r.a.createElement(ee.a,Object.assign({ref:t,ace:ae.a,allowedModes:a,htmlElementProps:{style:{height:"100%"}},theme:"ace/theme/github",sortObjectKeys:!0,history:!0},e))})),le=a(87),oe=a.n(le),ce=a(34),ie=a(72),se=a(91),ue=(a(115),function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selected:[]},e.selectionChanged=function(t,a){void 0===a&&(a=N(":selected")),e.setState({selected:a}),e.props.onChange(a)},e.multiSelectChanged=function(t){var a=window.cy.collection(t.map((function(e){return e.element})));window.cy.startBatch(),window.cy.elements().deselect(),a.select(),window.cy.endBatch(),e.selectionChanged(null,a)},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){window.cy.on("select unselect",this.selectionChanged)}},{key:"componentWillUnmount",value:function(){window.cy.removeListener("select unselect",this.selectionChanged)}},{key:"render",value:function(){var e=function(e){var t=e.map((function(e,t){var a=e.data("name");if("edges"===e.group()){var n=e.source().data("name"),r=e.target().data("name");return{id:t,label:"".concat(n," (").concat(a,") ").concat(r),group:e.group(),element:e}}return{id:t,label:a,group:e.group(),element:e}}));return t.sort((function(e,t){return e.name>t.name})),t}(N()),t=e.filter((function(e){return e.element.selected()})),a=r.a.createElement(ie.a,null,r.a.createElement(ie.a.Content,null,r.a.createElement(oe.a,{items:e,showSelectedItems:!0,showSelectedItemsSearch:!0,showSearch:!0,showSelectAll:!0,selectedItems:t,withGrouping:!0,onChange:this.multiSelectChanged})));return r.a.createElement(ce.a,null,r.a.createElement(h.a,{disabled:!0,placeholder:"Search",value:"".concat(t.length," elements selected")}),r.a.createElement(ce.a.Append,null,r.a.createElement(se.a,{trigger:"click",placement:"bottom",overlay:a},r.a.createElement(f.a,null,"Select"))))}}]),a}(r.a.Component)),de=["id","source","target"],me={filter:"contain",trigger:"focus",caseSensitive:!1,getOptions:function(e,t,a,n){if("value"===a){var r=t[1],l=new Set;return window.cy.elements().forEach((function(e){var t=e.data(r);console.log(t),t&&"object"!==typeof t&&l.add(t)})),Array.from(l)}if("field"===a){var o=new Set;return window.cy.elements().forEach((function(e){Object.keys(e.data()).forEach((function(e){return o.add(e)}))})),Array.from(o)}return[]}},he=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){var e=N(":selected"),t=e.map((function(e){return e.data()}));r.editor.current.jsonEditor.set(t),r.setState({selected:e})},r.onJsonChange=function(){r.editor.current.jsonEditor.get().forEach((function(e){window.cy.$("#"+e.id).data(e)}))},r.onEditable=function(e){return!e.path||2!==e.path.length||!de.includes(e.field)},r.onSelectionChange=function(e){var t=e.map((function(e){return e.data()}));r.editor.current.jsonEditor.set(t),r.setState({selected:e})},r.onClassesChange=function(e){var t=r.state.selected,a=[];e&&(a=e.map((function(e){return e.value}))),t.classes(a),r.setState(r.state)},r.onCreate=function(e){r.state.selected.addClass([e]),r.setState(r.state)},r.classItems=function(e){return e.map((function(e){return{value:e,label:e}}))},r.state={selected:window.cy.collection()},r.editor=Object(n.createRef)(),r}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.selected,t=F(),a=function(e){var t=new Set;return e.forEach((function(e,a){t=0===a?new Set(e.classes()):Object(S.a)(t).filter((function(t){return e.hasClass(t)}))})),Array.from(t)}(N(":selected"));return t=this.classItems(t),a=this.classItems(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(X.ResizableBox,{width:500,height:400,minConstraints:[280,250],maxConstraints:[1e3,1e3]},r.a.createElement(b.a,{style:{height:"100%"}},r.a.createElement(Q.a,null,r.a.createElement(ue,{onChange:this.onSelectionChange})),r.a.createElement(Q.a,null,r.a.createElement(Y.a,{isMulti:!0,isDisabled:0===e.length,isClearable:!0,onChange:this.onClassesChange,onCreateOption:this.onCreate,options:t,value:a})),r.a.createElement(Q.a,{style:{height:"100%"}},r.a.createElement(re,{ref:this.editor,onEditable:this.onEditable,onChange:this.onJsonChange,autocomplete:me})))))}}]),a}(r.a.Component),fe=a(89),ye=null,pe=["red","orange","yellow","green","blue","purple","white","black","pink","cyan","magenta",[200,20,50,120],"#0A0A4b"],ve=function(e){return e?e.enums?e.enums:e.number?[0]:e.color?pe:[]:[]},ge={filter:"contain",trigger:"focus",caseSensitive:!1,getOptions:function(e,t,a,n){if("value"===a){var r=t[0],l=new Set,o=window.cy.style().getDefaultProperty(r);return void 0!==o&&(l.add(o.strValue),l.add(o.value)),(c=r,null===ye&&(ye={},window.cy.style().properties.forEach((function(e){ye[e.name]=e.type}))),ve(ye[c])).forEach((function(e){return l.add(e)})),window.cy.elements().forEach((function(e){l.add(e.style(r))})),Array.from(l)}return"field"===a?window.cy.style().propertyNames:[];var c}},Ee=function(e){var t=window.cy.style().json().filter((function(t){return t.selector===e}));return t.length>0?t[0].style:{}},we=function(e){var t=e.defaultValue,a=e.handleClose,l=e.show,o=Object(n.createRef)(),i=Object(n.useState)(""),s=Object(c.a)(i,2),u=s[0],d=s[1],y=window.cy.style().json().map((function(e){return e.selector}));return r.a.createElement(w.a,{show:l,onHide:a},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,"Create Stylesheet")),r.a.createElement(w.a.Body,null,r.a.createElement(m.a,{invalidated:u,onSubmit:function(e){e.preventDefault();var n=o.current.value;if(y.includes(n))d("Error: Style selector already exists.");else{var r=function(e,t){var a="";return fe.a.parse(e)||(a="'".concat(e,"' is not a valid selector.")),a||window.cy.style().appendFromJson([{selector:e,style:t}]),a}(n,Ee(t));r?d("Error: ".concat(r)):a(e,n)}}},r.a.createElement(m.a.Group,{autoFocus:!0,controlId:"selector-input"},r.a.createElement(m.a.Label,null,"Style selector"),r.a.createElement(ce.a,{className:"mb-3"},r.a.createElement(h.a,{isInvalid:""!==u,ref:o,defaultValue:t,placeholder:"Selector name"}),r.a.createElement(ce.a.Append,null,r.a.createElement(f.a,{type:"submit"},"Create")),r.a.createElement(m.a.Control.Feedback,{type:"invalid"},u)),r.a.createElement(m.a.Text,{className:"text-muted"},"Examples: .className, node[height < 100], and",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://js.cytoscape.org/#selectors"},"many more"))))))},be=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).setSelector=function(e){var t=Ee(e);r.editor.current.jsonEditor.set(t),r.setState({selector:e})},r.handleDropdownAction=function(e){var t=r.state.selector,a=e;e.target&&(a=e.target.value);var n={};if("add"===a)n.show=!0;else if("copy"===a)n.show=!0,n.defaultValue=r.state.selector;else if("delete"===a){var l=window.cy.style().json().filter((function(e){return e.selector!==t}));window.cy.style().fromJson(l).update(),r.setState({selector:"node"})}r.setState({newSelectorModal:n})},r.styleChanged=function(e){r.setSelector(e.target.value)},r.onChange=function(e){var t=r.state.selector;0===r.errors.length&&O(t,e).update()},r.onValidate=function(e){var t=[];return Object.keys(e).forEach((function(a){window.cy.style().parse(a,e[a])||t.push({path:[a],message:"Invalid property."})})),r.errors=t,t},r.handleModalClose=function(e,t){r.setState({selector:t||r.state.selector,newSelectorModal:null})},r.editor=Object(n.createRef)(),r.state={selector:null,newSelectorModal:null},window.editor=r.editor,r.errors=[],r}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selector,n=t.newSelectorModal,l=window.cy.style().json().filter((function(e){return!I.includes(e.selector)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,Object.assign({handleClose:this.handleModalClose},n)),r.a.createElement(X.ResizableBox,{width:500,height:400,minConstraints:[280,250],maxConstraints:[1e3,1e3]},r.a.createElement(b.a,{style:{height:"100%"}},r.a.createElement(Q.a,null,r.a.createElement(ce.a,null,r.a.createElement(m.a.Control,{as:"select",placeholder:"Style",defaultValue:"0",onChange:this.styleChanged},r.a.createElement("option",{disabled:!0,value:"0"}," - Style selectors - "),l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.selector},e.selector)}))),r.a.createElement(s.a,{as:ce.a.Append,onSelect:this.handleDropdownAction},r.a.createElement(f.a,{onClick:function(t){return e.handleDropdownAction("add")}},"Add"),r.a.createElement(s.a.Toggle,{split:!0}),r.a.createElement(s.a.Menu,null,r.a.createElement(s.a.Item,{disabled:null===a,eventKey:"copy"},"Copy"),r.a.createElement(s.a.Item,{disabled:null===a||A.includes(a),eventKey:"delete"},"Delete"))))),r.a.createElement(Q.a,{style:{height:"100%"}},r.a.createElement(re,{ref:this.editor,onValidate:this.onValidate,onChange:this.onChange,autocomplete:ge})))))}}]),a}(r.a.Component),Ce=(a(116),a(117),function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={hidden:!1,tab:"style"},e.tabChange=function(t){e.setState({tab:t})},e.toggle=function(){var t=e.state.hidden;e.setState({hidden:!t})},e.render=function(){var t=e.state,a=t.hidden,n=t.tab;return a?r.a.createElement("button",{type:"button",className:"btn btn-dark",id:"editor-button",onClick:e.toggle},r.a.createElement($.a,{icon:W.a})):r.a.createElement(C.a,{id:"editor"},r.a.createElement(C.a.Header,{style:{paddingTop:".1rem"}},r.a.createElement(u.a,{variant:"tabs",activeKey:n,onSelect:e.tabChange},r.a.createElement(u.a.Item,null,r.a.createElement(u.a.Link,{eventKey:"data"},"Data")),r.a.createElement(u.a.Item,null,r.a.createElement(u.a.Link,{eventKey:"style"},"Style")),r.a.createElement(f.a,{className:"close ml-auto",onClick:e.toggle,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))),"data"===n&&r.a.createElement(he,null),"style"===n&&r.a.createElement(be,null))},e}return a}(r.a.Component)),Se=a(92),je=0,Oe=function(e){if(!window.cy){window.cy=e;var t={preview:!1,hoverDelay:150,noEdgeEventsInDraw:!0,complete:function(e,t,a){a.select()},edgeParams:function(e,t){return{data:{id:j(),name:""}}}};e.edgehandles(t);e.on("tap",(function(t){t.target===e&&function(t){var a=e.add(Object(Se.a)({group:"nodes"},t));setTimeout((function(){return a.select()}),100)}({data:{id:j(),name:"New Node ".concat(je++)},renderedPosition:{x:t.renderedPosition.x,y:t.renderedPosition.y}})}))}};H.a.use(Z.a);var ke=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).onCreate=function(t){e.state.cy||(Oe(t),e.setState({cy:t}))},e.state={cy:null},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.cy;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{id:"cyto",stylesheet:V,cy:this.onCreate,elements:[]}),e&&r.a.createElement(Ce,null))}}]),a}(r.a.Component),Ie=(a(118),a(119),a(120),function(){return r.a.createElement("div",{className:"content"},r.a.createElement(K,null),r.a.createElement("div",{id:"cy-wrapper"},r.a.createElement(ke,null)))});o.a.render(r.a.createElement(Ie,null),document.getElementById("root"))},93:function(e,t,a){e.exports=a(121)}},[[93,1,2]]]);
//# sourceMappingURL=main.109e5ff3.chunk.js.map